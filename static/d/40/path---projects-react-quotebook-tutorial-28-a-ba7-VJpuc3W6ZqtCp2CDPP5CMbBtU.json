{"data":{"markdownRemark":{"html":"<p>In this tutorial we'll learn how to create an animated quotebook. Check out a live demo of the application here: <a href=\"http://www.randomquotebook.surge.sh\">randomquotebook.surge.sh</a>.</p>\n<h2>Road Map</h2>\n<ol>\n<li>Understand and use <a href=\"https://github.com/facebookincubator/create-react-app\">create-react-app</a> as a boilerplate.</li>\n<li>Create a function to shuffle the array of available quotes each time the application refreshes.</li>\n<li>Create \"Next\" and \"Back\" buttons to allow users to navigate through the quotes.</li>\n<li>Add transition animations using <a href=\"http://marnusw.github.io/react-css-transition-replace/\">react-css-transition-replace</a>.</li>\n<li>Build and deploy the app using <a href=\"http://surge.sh/\">surge.sh</a>.</li>\n</ol>\n<h3>Getting Started with create-react-app</h3>\n<p>This tutorial assumes a working knowledge of <a href=\"https://nodejs.org/en/\">Node.js</a> and <a href=\"https://www.npmjs.com/\">npm</a>. Check out Alexandru Vladutu's <a href=\"https://www.airpair.com/javascript/node-js-tutorial\">Step-by-Step Node.js tutorial</a> if you are unfamiliar.</p>\n<p>Once you have Node and npm installed, we're ready to get started.</p>\n<p>Facebook's <a href=\"https://github.com/facebookincubator/create-react-app\">create-react-app</a> boilerplate project is a convenient way to start new React SPA projects. It takes care of a lot of the grunt work that comes with setting up a React app. Read more about it <a href=\"https://facebook.github.io/react/blog/2016/07/22/create-apps-with-no-configuration.html\">here</a> if you are interested.</p>\n<p>Now from the command line, install the create-react-app npm package globally:</p>\n<pre><code class=\"language-bash\">npm install -g create-react-app\n</code></pre>\n<p>Now, in a directory of your choosing, create a new app:</p>\n<pre><code class=\"language-bash\">create-react-app quotebook\n</code></pre>\n<p>This might take a minute or two to complete. After it completes, cd into the new project and save <a href=\"https://www.npmjs.com/package/immutable\">immutable</a> and <a href=\"https://www.npmjs.com/package/react-css-transition-replace\">react-css-transition-replace</a>, two npm packages we'll use later:</p>\n<pre><code class=\"language-bash\">cd quotebook-tutorial\nnpm i --save immutable react-css-transition-replace\n</code></pre>\n<p>After those finish installing, you can start up the app by running:</p>\n<pre><code class=\"language-bash\">npm start\n</code></pre>\n<p>This will start a development server at localhost:3000. Open up your browser and check it out. It should look like this.</p>\n<p><img src=\"create-react-app-start-screen.png\" alt=\"React boilerplate\"></p>\n<br>\n<p>Explore the create-react-app project structure a little bit. The most important files to note are:</p>\n<ul>\n<li><strong>src/App.js</strong>: what you actually make edits to.</li>\n<li><strong>src/index.js</strong>: handles the call to ReactDOM to render the entire <App /> in the \"root\" div.</li>\n<li><strong>public/index.html</strong>: the html page onto which the app is rendered.</li>\n</ul>\n<h3>Add Bootstrap and Google Fonts</h3>\n<p>In the head of <code>public/index.html</code> add the following lines:</p>\n<pre><code class=\"language-html\">&#x3C;link rel=\"stylesheet\" href=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css\" integrity=\"sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u\" crossorigin=\"anonymous\">\n&#x3C;link href=\"https://fonts.googleapis.com/css?family=Arvo:400,700|Open+Sans\" rel=\"stylesheet\">\n</code></pre>\n<p>These additions allow use of Bootstrap CSS styles and Google Font's <a href=\"https://fonts.google.com/specimen/Arvo\">Arvo</a> and <a href=\"https://fonts.google.com/specimen/Open+Sans\">Open Sans</a>.</p>\n<h3>Component Level Design</h3>\n<p>No matter how simple the project, it's always helpful to look at a component-level design of the application.</p>\n<p><img src=\"component-level-design.png\" alt=\"Component Level Block Diagram\"></p>\n<p>Nothing too surprising here. Aside from the App-level component, we'll only need two additional components: QuoteModal and Control.</p>\n<h3>Create the QuoteModal Component</h3>\n<p>The QuoteModal component will handle display each quote and author with proper styling.</p>\n<p>Within the <code>src</code> folder of the project, create a new directory called <code>components</code>, and within that directory, create two new files, <code>QuoteModal.js</code> and <code>styles.css</code>. Now within the <code>QuoteModal.js</code> file add the following code:</p>\n<pre><code class=\"language-jsx\">import React, { Component } from 'react'\nimport './styles.css'\n\nclass QuoteModal extends Component {\n\n  render(){\n    return(\n      &#x3C;div className=\"text-center quote-modal\">\n        &#x3C;p className=\"quote-text\">\"{this.props.quote}\"&#x3C;/p>\n          &#x3C;hr/>\n        &#x3C;p>- {this.props.author}&#x3C;/p>\n      &#x3C;/div>\n    )\n  }\n}\n\nexport default QuoteModal\n</code></pre>\n<p>And within the <code>styles.css</code> file add the following code:</p>\n<pre><code class=\"language-css\">.quote-modal {\n  font-family: 'Open Sans', sans-serif;\n  font-size: 16px;\n  padding: 20px;\n  border-radius: 3px;\n  margin: auto;\n  width: 95%;\n  height: auto;\n  background-color: #fff;\n  box-shadow:2px 2px 5px #9E9E9E;\n}\n\n.quote-text {\n  line-height: 1.5;\n}\n\n@media only screen and (min-width: 768px){\n  .quote-modal {\n      width: 500px;\n      font-size: 18px;\n  }\n}\n</code></pre>\n<p>Let's understand what's going on in the code above. First, in the <code>QuoteModal.js</code> file:</p>\n<ul>\n<li>\n<p>Importing the default export from <code>'react'</code> under the name <code>React</code>, and we're importing the <strong>named</strong> export <code>Component</code> under the same name. See <a href=\"https://stackoverflow.com/questions/31096597/using-brackets-with-javascript-import-syntax\">this StackOverflow post</a> for more on import syntax.</p>\n</li>\n<li>\n<p>Importing our newly created stylesheet <code>styles.css</code>.</p>\n</li>\n<li>\n<p>Declare the QuoteModal component using an <a href=\"https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Classes\">ES6 class</a>, and define it's <code>render()</code> method, the only method required to implement a valid React component. Within the render method, the <code>quote</code> and <code>author</code> props are styled appropriately in paragraph tags, and the entire thing is wrapped in a div.</p>\n</li>\n<li>\n<p>Export the QuoteModal class so it can be used within the <code>App.js</code> file later.</p>\n</li>\n</ul>\n<p>Now within the <code>styles.css</code> file:</p>\n<ul>\n<li>Define the QuoteModal CSS class, which is mobile-optimized. The media query handles checking if the user is on a desktop or tablet, in which case we provide a static width of 500px for the modal and increase the font size.</li>\n</ul>\n<h3>Create the Control Component</h3>\n<p>The Control component will allow us to create our \"Back\" and \"Next\" controls. <a href=\"https://dmfrancisco.github.io/react-icons/\">This article</a> provides a simple, straightforward way to implement icons using inline SVGs; the code below is a simplified version of their example Icon component. Bonus: the article also provides a ton of icons for free use! We'll be using the \"arrow-back\" and \"arrow-forward\" SVGs.</p>\n<p>Within the <code>components</code> folder, create a file called <code>Control.js</code> and add the following code:</p>\n<pre><code class=\"language-jsx\">import React, { Component } from 'react';\n\nclass Control extends Component {\n\n  renderGraphic(){\n    switch(this.props.icon){\n      case 'arrow-back':\n        return (\n          &#x3C;g>&#x3C;path d=\"M20 11h-12.17l5.59-5.59-1.42-1.41-8 8 8 8 1.41-1.41-5.58-5.59h12.17v-2z\">&#x3C;/path>&#x3C;/g>\n        )\n      case 'arrow-forward':\n        return (\n          &#x3C;g>&#x3C;path d=\"M12 4l-1.41 1.41 5.58 5.59h-12.17v2h12.17l-5.58 5.59 1.41 1.41 8-8z\">&#x3C;/path>&#x3C;/g>\n        )\n    }\n  }\n\n  render(){\n\n    const sx = {\n      fill: '#FFF',\n    }\n\n    return(\n    &#x3C;svg\n      onClick={this.props.onClickFunction}\n      style={sx}\n      width={this.props.width}\n      height={this.props.height}\n      viewBox=\"0 0 24 24\">\n      {this.renderGraphic()}\n    &#x3C;/svg>\n    )\n  }\n}\n\nexport default Control\n</code></pre>\n<p>Again, let's make sure we understand what's going on above:</p>\n<p>The<code>renderGraphic()</code>method decides which SVG to dispay, based on the \"icon\" prop passed in to the component. Since our application only has two potential icons, \"arrow-back\" and \"arrow-forward\", we only define cases for those.</p>\n<p>The <code>render()</code> method returns an styled svg element. The width, height and onClick function are passed to the component as props and are used here. Note: you could add additional styles to the <code>sx</code> object if you so choose.</p>\n<h3>Use the Components within App.js</h3>\n<p>Time to strip the boilerplate code out of <code>App.js</code> and add in the newly created QuoteModal and Control components.</p>\n<p>Within <code>App.js</code> add the following code:</p>\n<pre><code class=\"language-jsx\">import React, { Component } from 'react'\n\nimport QuoteModal from './components/QuoteModal'\nimport Control from './components/Control'\n\nimport './App.css'\n\nclass App extends Component {\n\n  constructor(props){\n    super(props)\n    this.state = {\n    }\n  }\n\n  render() {\n    return (\n      &#x3C;div className=\"App\">\n        &#x3C;div className=\"App-header\">\n          &#x3C;h2>Quotebook&#x3C;/h2>\n        &#x3C;/div>\n\n        &#x3C;QuoteModal\n          key={1}\n          quote={\"Test Quote\"}\n          author={\"Test Author\"}\n        />\n\n        &#x3C;div className=\"control-section\">\n          &#x3C;div className=\"control-container\">\n            &#x3C;Control\n              className=\"inline-control\"\n              width={\"40\"}\n              height={\"40\"}\n              icon={\"arrow-back\"}\n              onClickFunction={() => {\n                console.log(\"back button clicked\")}}\n              />\n          &#x3C;/div>\n          &#x3C;div className=\"control-container\">\n            &#x3C;Control\n              className=\"inline-control\"\n              width={\"40\"}\n              height={\"40\"}\n              icon={\"arrow-forward\"}\n              onClickFunction={() => {\n                console.log(\"next button clicked\")}}\n              />\n          &#x3C;/div>\n        &#x3C;/div>\n      &#x3C;/div>\n    );\n  }\n}\n\nexport default App;\n</code></pre>\n<p>And within <code>App.css</code> add the following classes:</p>\n<pre><code class=\"language-css\">body {\n  height: 100%;\n  background-color: #124563;\n}\n\n.App {\n  text-align: center;\n  display: block;\n  overflow: auto;\n  height: 100vh;\n}\n\n.App-header {\n  font-family: 'Arvo', serif;\n  height: 100px;\n  padding: 20px;\n  color: #fff;\n}\n\n.control-section {\n  text-align: center;\n  padding: 20px;\n  margin: auto;\n  display: block;\n}\n\n.control-container {\n  display: inline-block;\n  border-radius: 58%;\n  padding: 5px;\n  margin: 0px 30px 0px 30px;\n  transition: background-color 0.5s ease-in;\n}\n\n.control-container:active {\n  background-color: #fff;\n}\n</code></pre>\n<p>Save both files, and check out the app on localhost. It should look similar to this:</p>\n<p><img src=\"milestone.gif\"></p>\n<br>\n<p>Understanding the additions to <code>App.js</code>:</p>\n<p>Import our QuoteModal and Control components. Definition of the <code>constructor()</code> function, which we'll use later. Definition of the <code>render()</code> method. The QuoteModal component takes two example strings in as props. Below that, the controls section. Two Control components are defined here, the first for the Back button and the second for the Next button (as specified by their <code>icon</code> props). Each Control has a dummy function passed in for the <code>onClickFunction</code> prop, which just logs the click to the console.</p>\n<h3>Add Real Quotes</h3>\n<p>With the components working correctly, it's time to introduce real quotes. Two options here.</p>\n<ol>\n<li>Use the quotes file I've created, available on the <a href=\"https://github.com/e-nichols/quotebook/blob/master/src/quotes.js\">Github repo for this project</a>.</li>\n<li>Create your own quotes.js file, making sure to match the format shown in the linked file above.</li>\n</ol>\n<p>Whichever you choose, save the resulting <code>quotes.js</code> file in the <code>src</code> directory. And add the following lines to the top of <code>App.js</code>:</p>\n<pre><code class=\"language-jsx\">import { List } from 'immutable'\nimport quotes from './quotes'\n</code></pre>\n<p>And now we'll update the <code>constructor</code> function with the following code:</p>\n<pre><code>  constructor(props){\n\n    super(props)\n\n    const the_quotes = List(quotes)\n    const init = the_quotes.get(0)\n\n    this.state = {\n      quote: init.quote,\n      author: init.author,\n      available_quotes: the_quotes,\n      index: 0\n    }\n  }\n</code></pre>\n<p>I've opted to use <a href=\"https://facebook.github.io/immutable-js/\">Immutable.js</a> here to create a <a href=\"https://facebook.github.io/immutable-js/docs/#/List\">List</a> from the array of quotes. Is it <em>really</em> necessary to use immutable data structures here? Not really. But the List structure is easy and convenient to use and I've wanted to check out this project for a while. Check out <a href=\"https://www.youtube.com/watch?v=I7IdS-PbEgI\">this talk</a> if you want to learn more about immutable data.</p>\n<p>Beyond that, we are defining state variables for the App-level component. The first quote from the List is used to populate the <code>quote</code> and <code>author</code> variables. The <code>the_quotes</code> variable is assigned to <code>available_quotes</code> and we initialize the <code>index</code> variable to 0, which will be used within the onClickFunctions for the controls.</p>\n<p>Update the code for the QuoteModal within the <code>render()</code> function to make use of the newly defined <code>quote</code> and <code>author</code> variables:</p>\n<pre><code class=\"language-jsx\">...\n    &#x3C;QuoteModal key={1} quote={this.state.quote} author={this.state.author} />\n...\n</code></pre>\n<p>Save the changes to <code>App.js</code> and check out the browser, it should be displaying this quote:</p>\n<p><img src=\"firstq.png\"></p>\n<br>\n<h3>Create onClick functions for Back and Next Controls</h3>\n<p>Users should be able to use the Back and Next controls to navigate through the collection of quotes. To accomplish this, the <code>index</code> variable defined earlier comes into play.</p>\n<p>Let's think about how we would use <code>index</code> to implement the next and back buttons. A naive implementation to start, which includes a helper function <code>performUpdate()</code>:</p>\n<pre><code class=\"language-jsx\">  performUpdate(){\n    const nq = this.state.available_quotes.get(this.state.index)\n    this.setState({\n      quote: nq.quote,\n      author: nq.author,\n    })\n  }\n\n  handleBackButton(){\n      this.setState({\n        index: this.state.index - 1\n      }, this.performUpdate)\n  }\n\n  handleNextButton(){\n      this.setState({\n        index: this.state.index + 1\n      }, this.performUpdate)\n  }\n</code></pre>\n<p>What's going on here? We've defined two handler functions, <code>handleBackButton</code> and <code>handleNextButton</code> which makes a call to React component method <code>setState</code>, decrementing and incrementing the index variable, respectively. And then we provide the <code>performUpdate</code> method as a callback to be executed <em>after</em> this update to the <code>index</code> variable goes through.</p>\n<p>The reasoning for this is laid out in the <a href=\"https://facebook.github.io/react/docs/react-component.html#setstate\">React Docs</a>:</p>\n<blockquote>\n<p>\"Think of <code>setState()</code> as a request rather than an immediate command to update the component. For better perceived performance, React may delay it, and then update several components in a single pass. React does not guarantee that the state changes are applied immediately.</p>\n</blockquote>\n<blockquote>\n<p><code>setState()</code> does not always immediately update the component. It may batch or defer the update until later. This makes reading <code>this.state</code> right after calling <code>setState()</code> a potential pitfall. Instead, use <code>componentDidUpdate</code> or a <code>setState</code> callback (<code>setState(updater, callback)</code>), either of which are guaranteed to fire after the update has been applied. If you need to set the state based on the previous state, read about the updater argument below.\"</p>\n</blockquote>\n<p>Using the callback parameter works well here because <code>performUpdate</code> is dependent on the index either incrementing or decrementing in order to load a new quote and author.</p>\n<p>What if a user immediately hits the back button after launching the page? Won't that decrement the counter to -1? *Yes it will. That's OK though, because <a href=\"https://facebook.github.io/immutable-js/docs/#/List/get\">Immutable.js List indices may be negative</a>. Therefore we can support this interaction by default.</p>\n<p>That makes sense... but there's still a problem. Say you only had 5 quotes total. And a user immediately starts hitting the back button, -1, -2, -3, -4, -5... -6? Shit! Trying to <code>get(-6)</code> on a list of size 5 will break the app. We need to guard against this, and reset the counter upon reaching the absolute value of the size of the quotes array being used. Make a few small additions to the <code>increment</code> and <code>decrement</code> functions:</p>\n<pre><code class=\"language-jsx\">  handleBackButton(){\n    if(this.state.index === -(this.state.available_quotes.size - 1)){\n        this.setState({\n          index: 0\n        }, this.performUpdate)\n    } else {\n        this.setState({\n          index: this.state.index - 1\n        }, this.performUpdate)\n    }\n  }\n\n  handleNextButton(){\n    if(this.state.index === (this.state.available_quotes.size - 1)){\n        this.setState({\n          index: 0\n        }, this.performUpdate)\n    } else {\n        this.setState({\n          index: this.state.index + 1\n        }, this.performUpdate)\n    }\n  }\n</code></pre>\n<p>Nice. The if statements turn our List into a circular list, and we'll never have to worry about an invalid indice being generated by the user.</p>\n<h3>The Shuffle Function</h3>\n<p>It's boring to see the same order of quotes each time. Let's fix this by adding an in-place shuffle function to the constructor. A <a href=\"https://stackoverflow.com/questions/2450954/how-to-randomize-shuffle-a-javascript-array\">quick search on StackOverflow</a> tells us that the Fisher-Yates shuffle is a good candidate for this. Check out this <a href=\"https://bost.ocks.org/mike/shuffle/\">awesome post and visualization of the algorithm</a> if you want to learn more. Within <code>App.js</code>, add the following function:</p>\n<pre><code class=\"language-jsx\">  shuffleQuotes(arr){\n    let curIndex = arr.length, tempVal, randIndex\n\n    while(0 !== curIndex){\n      //pick remaining element\n      randIndex = Math.floor(Math.random() * curIndex)\n      curIndex -= 1\n\n      //swap with current\n      tempVal = arr[curIndex]\n      arr[curIndex] = arr[randIndex]\n      arr[randIndex] = tempVal\n    }\n\n    return arr\n  }\n</code></pre>\n<p>And now, modify the <code>constructor</code> to make use of the new shuffle function:</p>\n<pre><code class=\"language-jsx\">  constructor(props){\n    super(props)\n\n    //randomize order of quotes at start of session\n    const shuffled = List(this.shuffleQuotes(quotes))\n    const init = shuffled.get(0)\n\n    this.state = {\n      quote: init.quote,\n      author: init.author,\n      available_quotes: shuffled,\n      index: 0\n    }\n  }\n</code></pre>\n<p>Great! Refresh the app and click around to test it out. The quotes will shuffle each time the user refreshes the app.</p>\n<h3>Selecting Random Background Color</h3>\n<p>Let's make things a little more visually appealing by having the background color change each time a new quote loads.</p>\n<p>Within the <code>src</code> folder create a new file <code>colors.js</code> and within it add the following code:</p>\n<pre><code class=\"language-jsx\">module.exports = [ '#703030', '#2F343B', '#7E827A', '#E3CDA4', '#C77966' ]\n</code></pre>\n<p>The colors above are from the <a href=\"https://color.adobe.com/Vintage-Ralph-Lauren-color-theme-2216979/?showPublished=true\">Vintage Ralph Lauren Color Theme</a> on Adobe Kuler. You can find another theme there if you want, or just choose random colors. Add as many as you like. Alternative method: create a function that generates a random hex color string and use that within the render method of the App. Note that you'll probably have to guard against generating white/off-white colors because the Back and Next buttons won't be visible.</p>\n<p>Within <code>App.js</code>, import the new <code>colors.js</code> file:</p>\n<pre><code class=\"language-jsx\">import colors from './colors'\n</code></pre>\n<p>Modify the constructor function one more time:</p>\n<pre><code class=\"language-jsx\">  constructor(props){\n    super(props)\n\n    const shuffled = List(this.shuffleQuotes(quotes))\n    const init = shuffled.get(0)\n\n    const bgcolors = List(colors)\n\n    this.state = {\n      quote: init.quote,\n      author: init.author,\n      available_quotes: shuffled,\n      colors: bgcolors,\n      index: 0\n    }\n  }\n</code></pre>\n<p>Add a helper function to select a random color from the array:</p>\n<pre><code class=\"language-jsx\">  getRandomColor(){\n    let ind = Math.floor(Math.random() * this.state.colors.size)\n    return this.state.colors.get(ind)\n  }\n</code></pre>\n<p>And last, make use of this new function in the <code>render</code> method:</p>\n<pre><code class=\"language-jsx\">render() {\n\n    const bgcolor = this.getRandomColor()\n    const container_style  = {\n      backgroundColor: bgcolor,\n      transition: 'background-color 1s ease'\n    }\n\n    return (\n      &#x3C;div className=\"App\" style={container_style}>\n        &#x3C;div className=\"App-header\">\n          &#x3C;h2 className=\"animated fadeIn\">Quotebook&#x3C;/h2>\n        &#x3C;/div>\n        ...\n</code></pre>\n<p>Refresh the app and click around to see the new background colors in action. The transition CSS attribute comes in handy here, allowing for smoother transitions between background colors.</p>\n<h3>Adding Animations</h3>\n<p>Let's animate the transition between quotes in a similar way to how the background color transitions. If only there was an open source component that animates replacing one element with another... like <a href=\"https://github.com/marnusw/react-css-transition-replace\">react-css-transition-replace</a>!. As its README notes, there are some nice advantages to using this component:</p>\n<ul>\n<li>It automatically handles the positioning of the animated components, and</li>\n<li>allows changes in the height of container to be handled and animated with ease when various content heights differ, even when absolute positioning is used.</li>\n</ul>\n<p>That really comes in handy here because of the variable length of each quote. Let's add it in. We already took care of installing the react-css-transition-replace npm package at the start of the project; import into <code>App.js</code> now:</p>\n<p>We'll use the cross-fade transition as shown in the first example on the README. Add the following styles to <code>App.css</code>:</p>\n<pre><code class=\"language-css\">.cross-fade-leave {\n  opacity: 1;\n}\n\n.cross-fade-leave.cross-fade-leave-active {\n  opacity: 0;\n  transition: opacity 1s ease-in;\n}\n\n.cross-fade-enter {\n  opacity: 0;\n}\n\n.cross-fade-enter.cross-fade-enter-active {\n  opacity: 1;\n  transition: opacity 1s ease-in;\n}\n\n.cross-fade-height {\n  transition: height 1s ease-in-out;\n}\n</code></pre>\n<p>And now let's use the component within App.js. Import it:</p>\n<pre><code class=\"language-jsx\">import ReactCSSTransitionReplace from 'react-css-transition-replace'\n</code></pre>\n<p>And modify the <code>render</code> method to use it:</p>\n<pre><code class=\"language-jsx\">  render() {\n\n    const bgcolor = this.getRandomColor()\n    const container_style  = {\n      backgroundColor: bgcolor,\n      transition: 'background-color 1s ease'\n    }\n\n    return (\n      &#x3C;div className=\"App\" style={container_style}>\n        &#x3C;div className=\"App-header\">\n          &#x3C;h2 className=\"animated fadeIn\">Quotebook&#x3C;/h2>\n        &#x3C;/div>\n\n        &#x3C;ReactCSSTransitionReplace transitionName=\"cross-fade\" transitionEnterTimeout={1500} transitionLeaveTimeout={1500} >\n          &#x3C;QuoteModal key={this.state.quote} quote={this.state.quote} author={this.state.author} />\n        &#x3C;/ReactCSSTransitionReplace>\n\n        &#x3C;div className=\"control-section\">\n          &#x3C;div className=\"control-container\">\n            &#x3C;Control width={\"40\"} height={\"40\"} icon={\"arrow-back\"} onClickFunction={this.handleBackButton.bind(this)} className=\"inline-control\" />\n          &#x3C;/div>\n          &#x3C;div className=\"control-container\">\n            &#x3C;Control width={\"40\"} height={\"40\"} icon={\"arrow-forward\"} onClickFunction={this.handleNextButton.bind(this)} className=\"inline-control\" />\n          &#x3C;/div>\n        &#x3C;/div>\n      &#x3C;/div>\n    );\n  }\n</code></pre>\n<p>Refresh the app and try out the new animation.</p>\n<h3>Reviewing App.js</h3>\n<p>Boom! You're done. Here is the <code>App.js</code> file in its final form:</p>\n<pre><code class=\"language-jsx\">import React, { Component } from 'react'\nimport ReactCSSTransitionReplace from 'react-css-transition-replace'\nimport { List } from 'immutable'\n\nimport QuoteModal from './components/QuoteModal'\nimport Control from './components/Control'\n\nimport './App.css'\n\nimport quotes from './quotes'\nimport colors from './colors'\n\nclass App extends Component {\n\n  constructor(props){\n    super(props)\n\n    const shuffled = List(this.shuffleQuotes(quotes))\n    const init = shuffled.get(0)\n\n    const bgcolors = List(colors)\n\n    this.state = {\n      quote: init.quote,\n      author: init.author,\n      available_quotes: shuffled,\n      colors: bgcolors,\n      index: 0\n    }\n  }\n\n  // https://stackoverflow.com/questions/2450954/how-to-randomize-shuffle-a-javascript-array\n  shuffleQuotes(arr){\n    let curIndex = arr.length, tempVal, randIndex\n\n    while(0 !== curIndex){\n      //pick remaining element\n      randIndex = Math.floor(Math.random() * curIndex)\n      curIndex -= 1\n\n      //swap with current\n      tempVal = arr[curIndex]\n      arr[curIndex] = arr[randIndex]\n      arr[randIndex] = tempVal\n    }\n\n    return arr\n  }\n\n  getRandomColor(){\n    let ind = Math.floor(Math.random() * this.state.colors.size)\n    return this.state.colors.get(ind)\n  }\n\n  performUpdate(){\n    const nq = this.state.available_quotes.get(this.state.index)\n    this.setState({\n      quote: nq.quote,\n      author: nq.author,\n    })\n  }\n\n  handleBackButton(){\n    // guard against users who start scrolling backwards immediately\n    // and miraculously make it all the way through to the end of the array\n    if(this.state.index === -(this.state.available_quotes.size - 1)){\n        this.setState({\n          index: 0\n        }, this.performUpdate)\n    } else {\n        this.setState({\n          index: this.state.index - 1\n        }, this.performUpdate)\n    }\n  }\n\n  handleNextButton(){\n    // guard against reaching end of quotes array and having to \"wrap back around\"\n    if(this.state.index === (this.state.available_quotes.size - 1)){\n        this.setState({\n          index: 0\n        }, this.performUpdate)\n    } else {\n        this.setState({\n          index: this.state.index + 1\n        }, this.performUpdate)\n    }\n  }\n\n  render() {\n\n    const bgcolor = this.getRandomColor()\n    const container_style  = {\n      backgroundColor: bgcolor,\n      transition: 'background-color 1s ease'\n    }\n\n    return (\n      &#x3C;div className=\"App\" style={container_style}>\n        &#x3C;div className=\"App-header\">\n          &#x3C;h2 className=\"animated fadeIn\">Quotebook&#x3C;/h2>\n        &#x3C;/div>\n\n        &#x3C;ReactCSSTransitionReplace transitionName=\"cross-fade\" transitionEnterTimeout={1500} transitionLeaveTimeout={1500} >\n          &#x3C;QuoteModal key={this.state.quote} quote={this.state.quote} author={this.state.author} />\n        &#x3C;/ReactCSSTransitionReplace>\n\n        &#x3C;div className=\"control-section\">\n          &#x3C;div className=\"control-container\">\n            &#x3C;Control width={\"40\"} height={\"40\"} icon={\"arrow-back\"} onClickFunction={this.handleBackButton.bind(this)} className=\"inline-control\" />\n          &#x3C;/div>\n          &#x3C;div className=\"control-container\">\n            &#x3C;Control width={\"40\"} height={\"40\"} icon={\"arrow-forward\"} onClickFunction={this.handleNextButton.bind(this)} className=\"inline-control\" />\n          &#x3C;/div>\n        &#x3C;/div>\n      &#x3C;/div>\n    );\n  }\n}\n\nexport default App;\n</code></pre>\n<h3>Prepare to Deploy</h3>\n<p>Let's build the app for production. This is super easy. From the command line, in the base directory of the project, run:</p>\n<pre><code class=\"language-bash\">npm run build\n</code></pre>\n<p>Simple as that. After the build completes you should see a message like this in your terminal:</p>\n<pre><code class=\"language-bash\">evannichols:_Dev/quotebook ‹master*›$ npm run build\n\n> quotebook@0.1.0 build /Users/evannichols/_Dev/quotebook\n> react-scripts build\n\nCreating an optimized production build...\nCompiled with warnings.\n\n./src/components/Control.js\n  Line 6:  Expected a default case  default-case\n\nSearch for the keywords to learn more about each warning.\nTo ignore, add // eslint-disable-next-line to the line before.\n\nFile sizes after gzip:\n\n  75.73 KB  build/static/js/main.e46c105f.js\n  524 B     build/static/css/main.37e0d7c2.css\n\nThe project was built assuming it is hosted at ./.\nYou can control this with the homepage field in your package.json.\n\nThe build folder is ready to be deployed.\n</code></pre>\n<h3>Deploy using Surge</h3>\n<p>It's time to share your quotebook with the world! If you want. <a href=\"http://surge.sh/\">Surge</a> is a ruthlessly simple way to deploy static apps/websites. First, install the surge npm package globally:</p>\n<pre><code class=\"language-bash\">npm install -g surge\n</code></pre>\n<p>If you would like to use a custom domain name (like mycoolquotebook.surge.sh or supercoolquotes.surge.sh) you'll need to add a CNAME into your <code>build</code> folder. Note that the domain must end in <code>.surge.sh</code>. If you don't care about the domain name you can skip this step; surge will automatically generate a random name for you. From the command line, cd into the <code>build</code> folder and run:</p>\n<pre><code class=\"language-bash\">echo &#x3C;YourCustomDomainName>.surge.sh > CNAME\n</code></pre>\n<p>Now, in the base directory of your project run:</p>\n<pre><code class=\"language-bash\">surge\n</code></pre>\n<p>This will then prompt you to specify your project path. Since we want to deploy the <code>build</code> folder, make sure to add that to the project path. Finally, hit enter, and let surge do the rest! It should look something like this:</p>\n<pre><code class=\"language-bash\">evannichols:_Dev/quotebook ‹master*›$ surge\n\n    Surge - surge.sh\n\n              email: evantnichols@gmail.com\n              token: *****************\n       project path: /Users/evannichols/_Dev/quotebook/build\n               size: 10 files, 2.4 MB\n             domain: randomquotebook.surge.sh\n             upload: [====================] 100%, eta: 0.0s\n   propagate on CDN: [====================] 100%\n               plan: Free\n              users: evantnichols@gmail.com\n         IP Address: 45.55.110.124\n\n    Success! Project is published and running at &#x3C;YourCustomDomainName>.surge.sh\n</code></pre>\n<p>Go check out your quotebook live!</p>\n<p><strong>Update (7/11/17)</strong>: It is possible to automate the deployment process by editing the <code>deploy</code> script in the project's <code>package.json</code> file:</p>\n<pre><code class=\"language-jsx\">    \"deploy\": \"echo &#x3C;YourCustomDomainName>.surge.sh > build/CNAME &#x26;&#x26; surge build\"\n</code></pre>\n<br/>\n<p>I hope you enjoyed creating your very own quotebook. Questions, comments, issues with the tutorial? Shoot me an email at evantnichols@gmail.com.</p>","timeToRead":19,"tableOfContents":"<ul>\n<li>\n<p><a href=\"/projects/react-quotebook-tutorial/#road-map\">Road Map</a></p>\n<ul>\n<li><a href=\"/projects/react-quotebook-tutorial/#getting-started-with-create-react-app\">Getting Started with create-react-app</a></li>\n<li><a href=\"/projects/react-quotebook-tutorial/#add-bootstrap-and-google-fonts\">Add Bootstrap and Google Fonts</a></li>\n<li><a href=\"/projects/react-quotebook-tutorial/#component-level-design\">Component Level Design</a></li>\n<li><a href=\"/projects/react-quotebook-tutorial/#create-the-quotemodal-component\">Create the QuoteModal Component</a></li>\n<li><a href=\"/projects/react-quotebook-tutorial/#create-the-control-component\">Create the Control Component</a></li>\n<li><a href=\"/projects/react-quotebook-tutorial/#use-the-components-within-appjs\">Use the Components within App.js</a></li>\n<li><a href=\"/projects/react-quotebook-tutorial/#add-real-quotes\">Add Real Quotes</a></li>\n<li><a href=\"/projects/react-quotebook-tutorial/#create-onclick-functions-for-back-and-next-controls\">Create onClick functions for Back and Next Controls</a></li>\n<li><a href=\"/projects/react-quotebook-tutorial/#the-shuffle-function\">The Shuffle Function</a></li>\n<li><a href=\"/projects/react-quotebook-tutorial/#selecting-random-background-color\">Selecting Random Background Color</a></li>\n<li><a href=\"/projects/react-quotebook-tutorial/#adding-animations\">Adding Animations</a></li>\n<li><a href=\"/projects/react-quotebook-tutorial/#reviewing-appjs\">Reviewing App.js</a></li>\n<li><a href=\"/projects/react-quotebook-tutorial/#prepare-to-deploy\">Prepare to Deploy</a></li>\n<li><a href=\"/projects/react-quotebook-tutorial/#deploy-using-surge\">Deploy using Surge</a></li>\n</ul>\n</li>\n</ul>","fields":{"tagSlugs":["/tags/react/","/tags/create-react-app/","/tags/tutorial/"]},"frontmatter":{"title":"React Animated Quotebook Tutorial","tags":["React","create-react-app","tutorial"],"date":"2017-06-30T00:12:03.000Z","author":{"id":"Evan Nichols","bio":"I'm a software engineer in NYC who likes React, Node, GraphQL and other cool web technologies. I also like running and dogs."}}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/projects/react-quotebook-tutorial/"}}